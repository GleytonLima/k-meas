run:
  name: "itau_pj_2025"
  random_state: 42
  output_dir: "/app/outputs"
  overwrite_output_dir: true

input:
  path: "/app/data/input.csv"
  separator: ","
  encoding: "utf-8"
  decimal: "."
  id_column: "id_contrato"

columns:
  numeric:
    - valor_emprestimo
    - quantidade_parcelas
    - prazo_dias
    - taxa_juros_anual
    - valor_parcela
    - score_cliente
    - idade_cliente
    - renda_mensal
    - parcela_sobre_renda
  categorical:
    - nome_produto
  drop:
    - data_contratacao

preprocess:
  missing:
    numeric_strategy: "median"
    categorical_strategy: "constant"
    categorical_fill_value: "MISSING"
  transforms:
    log1p_columns:
      - valor_emprestimo
      - valor_parcela
      - renda_mensal
  scaling:
    numeric_scaler: "robust"
  encoding:
    categorical_encoder: "onehot"
    onehot_min_frequency: 0.01
  outliers:
    enabled: true
    method: "winsorize"
    lower_quantile: 0.01
    upper_quantile: 0.99

k_selection:
  initial_k_range: [2, 15]
  elbow:
    enabled: true
    drop_threshold_pct: 10
    suggested_k_window: [4, 8]
  candidate_k_range: "elbow"
  manual_candidate_k_range: [4, 10]

methods:
  kmeans:
    enabled: true
    n_init: "auto"
  gmm:
    enabled: true
    covariance_type: "full"
    criterion: "bic"
  hierarchical:
    enabled: true
    linkage: "ward"
    dendrogram:
      max_points: 1000

visualization:
  embedding:
    method: "pca"
  plots:
    dpi: 150
    style: "default"
    save_format: "png"

reporting:
  top_categories_per_feature: 10
  min_cluster_size_pct: 0.03

